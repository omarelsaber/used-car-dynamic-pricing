schema: '2.0'
stages:
  process_data:
    cmd: python src/data/process_data.py --input data/raw/cardekho_v3.csv 
      --output data/processed/processed_cars.csv
    deps:
    - path: data/raw/cardekho_v3.csv
      hash: md5
      md5: 08c5f2987e4e9366b11011e7f12aee92
      size: 1041637
    - path: src/data/process_data.py
      hash: md5
      md5: 2f29533d40ba3f9449cb88b591e67b7e
      size: 14414
    outs:
    - path: data/processed/processed_cars.csv
      hash: md5
      md5: 4716c9a815548aac2f0c893ad27b4c91
      size: 688608
  build_features:
    cmd: python src/features/build_features.py --input 
      data/processed/processed_cars.csv --output-data 
      data/processed/featured_cars.csv --output-preprocessor 
      models/preprocessor.pkl
    deps:
    - path: data/processed/processed_cars.csv
      hash: md5
      md5: 4716c9a815548aac2f0c893ad27b4c91
      size: 688608
    - path: src/features/build_features.py
      hash: md5
      md5: f60b4837643091df25e0b421752ae0ba
      size: 12270
    outs:
    - path: data/processed/featured_cars.csv
      hash: md5
      md5: 506dc8d7d49e55869e0d6b6f51fb54bc
      size: 2211630
    - path: models/preprocessor.pkl
      hash: md5
      md5: 39893e66740293c5e450f3cfbff1d57e
      size: 4293
  train_model:
    cmd: python src/models/train_model.py --input 
      data/processed/featured_cars.csv --output-model models/model.pkl 
      --output-metrics metrics/scores.json --n-estimators 1000 --learning-rate 
      0.05 --max-depth 6 --reg-lambda 1.0 --reg-alpha 0.5 --subsample 0.9 
      --colsample-bytree 0.9 --min-child-weight 1 --gamma 0.0 --test-size 0.2 
      --random-state 42 --target price
    deps:
    - path: data/processed/featured_cars.csv
      hash: md5
      md5: 506dc8d7d49e55869e0d6b6f51fb54bc
      size: 2211630
    - path: src/models/train_model.py
      hash: md5
      md5: f5ceecf8f5c2a725cf5f48fcb16cf794
      size: 23888
    params:
      params.yaml:
        train.colsample_bytree: 0.9
        train.gamma: 0.0
        train.learning_rate: 0.05
        train.max_depth: 6
        train.min_child_weight: 1
        train.n_estimators: 1000
        train.random_state: 42
        train.reg_alpha: 0.5
        train.reg_lambda: 1.0
        train.subsample: 0.9
        train.target_col: price
        train.test_size: 0.2
    outs:
    - path: metrics/scores.json
      hash: md5
      md5: 62511c2304747e5e5c5260f4fb98fce0
      size: 98
    - path: models/model.pkl
      hash: md5
      md5: c31fd5c8c32cd29202ce19a15b6c7e9f
      size: 3888914
